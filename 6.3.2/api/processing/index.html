
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.arcticdb.io/6.3.2/api/processing/">
      
      
        <link rel="prev" href="../library_types/">
      
      
        <link rel="next" href="../exceptions/">
      
      
        
      
      
      <link rel="icon" href="../../images/ArcticDB Logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>DataFrame Processing Operations API - ArcticDB</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Aspekta:300,300i,400,400i,700,700i%7CGeist+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Aspekta";--md-code-font:"Geist Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/material.css">
    
      <link rel="stylesheet" href="../../stylesheets/mkdocstrings-python.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="arcticdb" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dataframe-processing-operations-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest version.
  <a href="../../..">
    <strong>Click here to go to latest.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ArcticDB" class="md-header__button md-logo" aria-label="ArcticDB" data-md-component="logo">
      
  <img src="../../images/ArcticDB Logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ArcticDB
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DataFrame Processing Operations API
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/man-group/ArcticDB" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    man-group/ArcticDB
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/fundamentals/" class="md-tabs__link">
          
  
  
  Guides

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../notebooks/ArcticDB_demo_lmdb/" class="md-tabs__link">
          
  
  
  Notebooks

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Python API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ArcticDB" class="md-nav__button md-logo" aria-label="ArcticDB" data-md-component="logo">
      
  <img src="../../images/ArcticDB Logo.svg" alt="logo">

    </a>
    ArcticDB
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/man-group/ArcticDB" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    man-group/ArcticDB
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Home
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    History of ArcticDB
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Frequently Asked Questions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../licensing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Licensing FAQs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/fundamentals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fundamentals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/parallel_writes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Parallel Writes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/snapshots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Snapshots
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metadata
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/lmdb_and_in_memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    In-memory Backends
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/data_organisation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Organisation Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/library_sizes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Library Sizes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/query_stats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Statistics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Storage Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Storage Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting started with AWS S3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws_permissions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Library Permissions with AWS S3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../azure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting started with Azure Blob Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Technical Information
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Technical Information
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/on_disk_storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    On-Disk Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arctic Migration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technical/upgrade_storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Upgrade Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configuration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lib_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Library Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../runtime_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Runtime Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../error_messages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Error Messages
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Notebooks
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Notebooks
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_demo_lmdb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Intro Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_demo_lazydataframe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LazyDataFrame Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_demo_querybuilder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Querybuilder Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_demo_resample/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resample Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_demo_concat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Symbol Concat Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_aws_public_blockchain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS Blockchain Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_demo_snapshots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Snapshots Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_demo_equity_analytics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Equity Analytics Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_demo_equity_options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Equity Options Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_billion_row_challenge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1 Billion Row Challenge Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_pythagorean_won_loss_formula_notebook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pythagorean Won Loss Formula Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../notebooks/ArcticDB_staged_data_with_tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Staged Data Notebook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Python API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arctic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arctic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arctic_uri/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Arctic URI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../library/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Library
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../library_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Library Related Objects
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    DataFrame Processing Operations API
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    DataFrame Processing Operations API
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#arcticdb.LazyDataFrame" class="md-nav__link">
    <span class="md-ellipsis">
      
        LazyDataFrame
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LazyDataFrame">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arcticdb.LazyDataFrame.collect" class="md-nav__link">
    <span class="md-ellipsis">
      
        collect
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arcticdb.LazyDataFrameCollection" class="md-nav__link">
    <span class="md-ellipsis">
      
        LazyDataFrameCollection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LazyDataFrameCollection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arcticdb.LazyDataFrameCollection.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.LazyDataFrameCollection.collect" class="md-nav__link">
    <span class="md-ellipsis">
      
        collect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.LazyDataFrameCollection.split" class="md-nav__link">
    <span class="md-ellipsis">
      
        split
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arcticdb.concat" class="md-nav__link">
    <span class="md-ellipsis">
      
        concat
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder" class="md-nav__link">
    <span class="md-ellipsis">
      
        QueryBuilder
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryBuilder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder--timestamp-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Timestamp filtering
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder--restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Restrictions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder--exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exceptions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.apply" class="md-nav__link">
    <span class="md-ellipsis">
      
        apply
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.concat" class="md-nav__link">
    <span class="md-ellipsis">
      
        concat
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.date_range" class="md-nav__link">
    <span class="md-ellipsis">
      
        date_range
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.groupby" class="md-nav__link">
    <span class="md-ellipsis">
      
        groupby
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.head" class="md-nav__link">
    <span class="md-ellipsis">
      
        head
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.optimise_for_memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        optimise_for_memory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.optimise_for_speed" class="md-nav__link">
    <span class="md-ellipsis">
      
        optimise_for_speed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.prepend" class="md-nav__link">
    <span class="md-ellipsis">
      
        prepend
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.resample" class="md-nav__link">
    <span class="md-ellipsis">
      
        resample
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.row_range" class="md-nav__link">
    <span class="md-ellipsis">
      
        row_range
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.tail" class="md-nav__link">
    <span class="md-ellipsis">
      
        tail
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arcticdb.QueryBuilder.then" class="md-nav__link">
    <span class="md-ellipsis">
      
        then
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arcticdb.where" class="md-nav__link">
    <span class="md-ellipsis">
      
        where
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin_tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Admin Tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query_stats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query Stats
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                



                  


  
  


<h1 id="dataframe-processing-operations-api">DataFrame Processing Operations API<a class="headerlink" href="#dataframe-processing-operations-api" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-class">



<h2 id="arcticdb.LazyDataFrame" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">arcticdb.LazyDataFrame</span>


<a href="#arcticdb.LazyDataFrame" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code></p>



        <p>Lazy dataframe implementation, allowing chains of queries to be added before the read is actually executed.
Returned by <code>Library.read</code>, <code>Library.head</code>, and <code>Library.tail</code> calls when <code>lazy=True</code>.</p>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>QueryBuilder for supported querying operations.</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt;</span>
<span class="go"># Specify that we want version 0 of &quot;test&quot; symbol, and to only return the &quot;new_column&quot; column in the output</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_df</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">as_of</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;new_column&quot;</span><span class="p">],</span> <span class="n">lazy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go"># Perform a filtering operation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_df</span> <span class="o">=</span> <span class="n">lazy_df</span><span class="p">[</span><span class="n">lazy_df</span><span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">)]</span>
<span class="go"># Create a new column through a projection operation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_df</span><span class="p">[</span><span class="s2">&quot;new_col&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lazy_df</span><span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">lazy_df</span><span class="p">[</span><span class="s2">&quot;col2&quot;</span><span class="p">]</span>
<span class="go"># Actual read and processing happens here</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">lazy_df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>












<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="collect (arcticdb.LazyDataFrame.collect)" href="#arcticdb.LazyDataFrame.collect">collect</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Read the data and execute any queries applied to this object since the read call.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>






  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="arcticdb.LazyDataFrame.collect" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">collect</span>


<a href="#arcticdb.LazyDataFrame.collect" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">collect</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="arcticdb.VersionedItem (arcticdb.version_store._store.VersionedItem)" href="../library_types/#arcticdb.VersionedItem">VersionedItem</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Read the data and execute any queries applied to this object since the read call.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.VersionedItem (arcticdb.version_store._store.VersionedItem)" href="../library_types/#arcticdb.VersionedItem">VersionedItem</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Object that contains a .data and .metadata element.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="arcticdb.LazyDataFrameCollection" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">arcticdb.LazyDataFrameCollection</span>


<a href="#arcticdb.LazyDataFrameCollection" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code></p>



        <p>Lazy dataframe implementation for batch operations. Allows the application of chains of queries to be added before
the actual reads are performed. Queries applied to this object will be applied to all  the symbols being read.
If per-symbol queries are required, split can be used to break this class into a list of <code>LazyDataFrame</code> objects.
Returned by <code>Library.read_batch</code> calls when <code>lazy=True</code>.</p>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>QueryBuilder for supported querying operations.</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt;</span>
<span class="go"># Specify that we want the latest version of &quot;test_0&quot; symbol, and version 0 of &quot;test_1&quot; symbol</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_dfs</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">read_batch</span><span class="p">([</span><span class="s2">&quot;test_0&quot;</span><span class="p">,</span> <span class="n">ReadRequest</span><span class="p">(</span><span class="s2">&quot;test_1&quot;</span><span class="p">,</span> <span class="n">as_of</span><span class="o">=</span><span class="mi">0</span><span class="p">)],</span> <span class="n">lazy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go"># Perform a filtering operation on both the &quot;test_0&quot; and &quot;test_1&quot; symbols</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_dfs</span> <span class="o">=</span> <span class="n">lazy_dfs</span><span class="p">[</span><span class="n">lazy_dfs</span><span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">)]</span>
<span class="go"># Perform a different projection operation on each symbol</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_dfs</span> <span class="o">=</span> <span class="n">lazy_dfs</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_dfs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="s2">&quot;new_col&quot;</span><span class="p">,</span> <span class="n">lazy_dfs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;col1&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_dfs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="s2">&quot;new_col&quot;</span><span class="p">,</span> <span class="n">lazy_dfs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;col1&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
<span class="go"># Bring together again and perform the same filter on both symbols</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_dfs</span> <span class="o">=</span> <span class="n">LazyDataFrameCollection</span><span class="p">(</span><span class="n">lazy_dfs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_dfs</span> <span class="o">=</span> <span class="n">lazy_dfs</span><span class="p">[</span><span class="n">lazy_dfs</span><span class="p">[</span><span class="s2">&quot;new_col&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="go"># Actual read and processing happens here</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">lazy_dfs</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div>












<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="__init__ (arcticdb.LazyDataFrameCollection.__init__)" href="#arcticdb.LazyDataFrameCollection.__init__">__init__</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Gather a list of <code>LazyDataFrame</code>s into a single object that can be collected together.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="collect (arcticdb.LazyDataFrameCollection.collect)" href="#arcticdb.LazyDataFrameCollection.collect">collect</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Read the data and execute any queries applied to this object since the read_batch call.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="split (arcticdb.LazyDataFrameCollection.split)" href="#arcticdb.LazyDataFrameCollection.split">split</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Separate the collection into a list of LazyDataFrames, including any queries already applied to this object.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>






  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="arcticdb.LazyDataFrameCollection.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


<a href="#arcticdb.LazyDataFrameCollection.__init__" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__init__</span><span class="p">(</span><span class="n">lazy_dataframes</span><span class="p">:</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="arcticdb.LazyDataFrame (arcticdb.version_store.library.LazyDataFrame)" href="#arcticdb.LazyDataFrame">LazyDataFrame</a></span><span class="p">])</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Gather a list of <code>LazyDataFrame</code>s into a single object that can be collected together.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lazy_dataframes</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Collection of <code>LazyDataFrames</code>s to gather together.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="arcticdb.LazyDataFrame (arcticdb.version_store.library.LazyDataFrame)" href="#arcticdb.LazyDataFrame">LazyDataFrame</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.LazyDataFrameCollection.collect" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">collect</span>


<a href="#arcticdb.LazyDataFrameCollection.collect" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">collect</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="arcticdb.VersionedItem (arcticdb.version_store._store.VersionedItem)" href="../library_types/#arcticdb.VersionedItem">VersionedItem</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="arcticdb.DataError (arcticdb_ext.version_store.DataError)" href="../exceptions/#arcticdb.DataError">DataError</a></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Read the data and execute any queries applied to this object since the read_batch call.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<span title="typing.Union">Union</span>[<a class="autorefs autorefs-internal" title="arcticdb.VersionedItem (arcticdb.version_store._store.VersionedItem)" href="../library_types/#arcticdb.VersionedItem">VersionedItem</a>, <a class="autorefs autorefs-internal" title="arcticdb.DataError (arcticdb_ext.version_store.DataError)" href="../exceptions/#arcticdb.DataError">DataError</a>]]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>See documentation on <code>Library.read_batch</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.LazyDataFrameCollection.split" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">split</span>


<a href="#arcticdb.LazyDataFrameCollection.split" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">split</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="arcticdb.LazyDataFrame (arcticdb.version_store.library.LazyDataFrame)" href="#arcticdb.LazyDataFrame">LazyDataFrame</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Separate the collection into a list of LazyDataFrames, including any queries already applied to this object.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="arcticdb.LazyDataFrame (arcticdb.version_store.library.LazyDataFrame)" href="#arcticdb.LazyDataFrame">LazyDataFrame</a>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arcticdb.concat" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">arcticdb.concat</span>


<a href="#arcticdb.concat" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">concat</span><span class="p">(</span>
    <span class="n">lazy_dataframes</span><span class="p">:</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span>
        <span class="n"><span title="typing.List">List</span></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="arcticdb.LazyDataFrame (arcticdb.version_store.library.LazyDataFrame)" href="#arcticdb.LazyDataFrame">LazyDataFrame</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-internal" title="arcticdb.LazyDataFrameCollection (arcticdb.version_store.library.LazyDataFrameCollection)" href="#arcticdb.LazyDataFrameCollection">LazyDataFrameCollection</a></span>
    <span class="p">],</span>
    <span class="n">join</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s2">&quot;outer&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="arcticdb.version_store.library.LazyDataFrameAfterJoin">LazyDataFrameAfterJoin</span></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Concatenate a list of symbols together.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>join</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether the columns of the input symbols should be inner or outer joined. Supported inputs are "inner" and
"outer".</p>
<ul>
<li>inner - Only columns present in ALL the input symbols will be present in the returned DataFrame.</li>
<li>outer - Columns present in ANY of the input symbols will be present in the returned DataFrame. Columns
  that are present in some input symbols but not in others will be backfilled according to their type using
  the same rules as with dynamic schema.</li>
</ul>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#34;outer&#34;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="arcticdb.version_store.library.LazyDataFrameAfterJoin">LazyDataFrameAfterJoin</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Lazy DataFrame representing the joined data, to which further processing operations can be chained.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="ArcticNativeException">ArcticNativeException</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>The join argument is not one of "inner" or "outer"</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Join 2 symbols together without any pre or post processing.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;col1&quot;: [0.5],</span>
<span class="go">        &quot;col2&quot;: [1],</span>
<span class="go">    },</span>
<span class="go">    index=[pd.Timestamp(&quot;2025-01-01&quot;)],</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;col3&quot;: [&quot;hello&quot;],</span>
<span class="go">        &quot;col2&quot;: [2],</span>
<span class="go">    },</span>
<span class="go">    index=[pd.Timestamp(&quot;2025-01-02&quot;)],</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol0&quot;</span><span class="p">,</span> <span class="n">df0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol1&quot;</span><span class="p">,</span> <span class="n">df1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_dfs</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">read_batch</span><span class="p">([</span><span class="s2">&quot;symbol0&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol1&quot;</span><span class="p">],</span> <span class="n">lazy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adb</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">lazy_dfs</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="s2">&quot;outer&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>                       col1     col2     col3
2025-01-01 00:00:00     0.5        1     None
2025-01-02 00:00:00     NaN        2  "hello"
</code></pre>
<p>Join 2 symbols together with both some per-symbol processing prior to the join, and some further processing after
the join.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;col&quot;: [0, 1, 2, 3, 4],</span>
<span class="go">    },</span>
<span class="go">    index=pd.date_range(&quot;2025-01-01&quot;, freq=&quot;min&quot;, periods=5),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;col&quot;: [5, 6, 7, 8, 9],</span>
<span class="go">    },</span>
<span class="go">    index=pd.date_range(&quot;2025-01-01T00:05:00&quot;, freq=&quot;min&quot; periods=5),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol0&quot;</span><span class="p">,</span> <span class="n">df0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol1&quot;</span><span class="p">,</span> <span class="n">df1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_df0</span><span class="p">,</span> <span class="n">lazy_df1</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">read_batch</span><span class="p">([</span><span class="s2">&quot;symbol0&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol1&quot;</span><span class="p">],</span> <span class="n">lazy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_df0</span> <span class="o">=</span> <span class="n">lazy_df0</span><span class="p">[</span><span class="n">lazy_df0</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_df1</span> <span class="o">=</span> <span class="n">lazy_df1</span><span class="p">[</span><span class="n">lazy_df1</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_df</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">lazy_df0</span><span class="p">,</span> <span class="n">lazy_df1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_df</span> <span class="o">=</span> <span class="n">lazy_df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;10min&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;col&quot;</span><span class="p">:</span> <span class="s2">&quot;sum&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lazy_df</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>                        col
2025-01-01 00:00:00      14
</code></pre>


    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="arcticdb.QueryBuilder" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">arcticdb.QueryBuilder</span>


<a href="#arcticdb.QueryBuilder" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents first">



        <p>Build a query to process read results with. Syntax is designed to be similar to Pandas:</p>
<pre><code>q = adb.QueryBuilder()
q = q[q["a"] &lt; 5] (equivalent to q = q[q.a &lt; 5] provided the column name is also a valid Python variable name)
dataframe = lib.read(symbol, query_builder=q).data
</code></pre>
<p>For Group By and Aggregation functionality please see the documentation for the <code>groupby</code>. For projection
functionality, see the documentation for the <code>apply</code> method.</p>
<p>Supported arithmetic operations when projection or filtering:</p>
<ul>
<li>Binary arithmetic: +, -, *, /</li>
<li>Unary arithmetic: -, abs</li>
</ul>
<p>Supported filtering operations:</p>
<ul>
<li>
<p>isna, isnull, notna, and notnull - return all rows where a specified column is/is not NaN or None. isna is
equivalent to isnull, and notna is equivalent to notnull, i.e. no distinction is made between NaN and None values
in column types that support both (e.g. strings). For example:
    <div class="highlight"><pre><span></span><code>q = q[q[&quot;col&quot;].isna()]
</code></pre></div></p>
</li>
<li>
<p>Binary comparisons: &lt;, &lt;=, &gt;, &gt;=, ==, !=</p>
</li>
<li>Unary NOT: ~</li>
<li>Binary combinators: &amp;, |, ^</li>
<li>List membership: isin, isnotin (also accessible with == and !=)</li>
<li>Regex match: regex_match</li>
</ul>
<p>isin/isnotin accept lists, sets, frozensets, 1D ndarrays, or *args unpacking. For example:</p>
<pre><code>l = [1, 2, 3]
q.isin(l)
</code></pre>
<p>is equivalent to...</p>
<pre><code>q.isin(1, 2, 3)
</code></pre>
<p>regex_match, similar to pandas' contains, accepts string as pattern and can only filter string columns</p>
<p>Boolean columns can be filtered on directly:</p>
<pre><code>q = adb.QueryBuilder()
q = q[q["boolean_column"]]
</code></pre>
<p>and combined with other operations intuitively:</p>
<pre><code>q = adb.QueryBuilder()
q = q[(q["boolean_column_1"] &amp; ~q["boolean_column_2"]) &amp; (q["numeric_column"] &gt; 0)]
</code></pre>
<p>Arbitrary combinations of these expressions is possible, for example:</p>
<pre><code>q = q[(((q["a"] * q["b"]) / 5) &lt; (0.7 * q["c"])) &amp; (q["b"] != 12)]
</code></pre>
<p>See tests/unit/arcticdb/version_store/test_filtering.py for more example uses.</p>
<h3 id="arcticdb.QueryBuilder--timestamp-filtering">Timestamp filtering<a class="headerlink" href="#arcticdb.QueryBuilder--timestamp-filtering" title="Permanent link">&para;</a></h3>
<p>pandas.Timestamp, datetime.datetime, pandas.Timedelta, and datetime.timedelta objects are supported.
Note that internally all of these types are converted to nanoseconds (since epoch in the Timestamp/datetime
cases). This means that nonsensical operations such as multiplying two times together are permitted (but not
encouraged).</p>
<h3 id="arcticdb.QueryBuilder--restrictions">Restrictions<a class="headerlink" href="#arcticdb.QueryBuilder--restrictions" title="Permanent link">&para;</a></h3>
<p>String equality/inequality (and isin/isnotin) is supported for printable ASCII characters only.
Although not prohibited, it is not recommended to use ==, !=, isin, or isnotin with floating point values.</p>
<h3 id="arcticdb.QueryBuilder--exceptions">Exceptions<a class="headerlink" href="#arcticdb.QueryBuilder--exceptions" title="Permanent link">&para;</a></h3>
<p>inf or -inf values are provided for comparison
Column involved in query is a Categorical
Symbol is pickled
Column involved in query is not present in symbol
Query involves comparing strings using &lt;, &lt;=, &gt;, or &gt;= operators
Query involves comparing a string to one or more numeric values, or vice versa
Query involves arithmetic with a column containing strings</p>












<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="apply (arcticdb.QueryBuilder.apply)" href="#arcticdb.QueryBuilder.apply">apply</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Apply enables new columns to be created using supported QueryBuilder numeric operations. See the documentation for the</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="concat (arcticdb.QueryBuilder.concat)" href="#arcticdb.QueryBuilder.concat">concat</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Concatenate a list of symbols together. Should be the first clause in a QueryBuilder provided to either</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="date_range (arcticdb.QueryBuilder.date_range)" href="#arcticdb.QueryBuilder.date_range">date_range</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>DateRange to read data for.  Applicable only for Pandas data with a DateTime index. Returns only the part</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="groupby (arcticdb.QueryBuilder.groupby)" href="#arcticdb.QueryBuilder.groupby">groupby</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Group symbol by column name. GroupBy operations must be followed by an aggregation operator. Currently the following five aggregation</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="head (arcticdb.QueryBuilder.head)" href="#arcticdb.QueryBuilder.head">head</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Filter out all but the first n rows of data. If n is negative, return all rows except the last n rows.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="optimise_for_memory (arcticdb.QueryBuilder.optimise_for_memory)" href="#arcticdb.QueryBuilder.optimise_for_memory">optimise_for_memory</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Reduce peak memory usage during the query, at the expense of some performance.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="optimise_for_speed (arcticdb.QueryBuilder.optimise_for_speed)" href="#arcticdb.QueryBuilder.optimise_for_speed">optimise_for_speed</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Process query as fast as possible (the default behaviour)</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="prepend (arcticdb.QueryBuilder.prepend)" href="#arcticdb.QueryBuilder.prepend">prepend</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Applies processing specified in other before any processing already defined for this QueryBuilder.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="resample (arcticdb.QueryBuilder.resample)" href="#arcticdb.QueryBuilder.resample">resample</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Resample a symbol on the index. The symbol must be datetime indexed. Resample operations must be followed by</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="row_range (arcticdb.QueryBuilder.row_range)" href="#arcticdb.QueryBuilder.row_range">row_range</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Row range to read data for. Inclusive of the lower bound, exclusive of the upper bound.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="tail (arcticdb.QueryBuilder.tail)" href="#arcticdb.QueryBuilder.tail">tail</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Filter out all but the last n rows of data. If n is negative, return all rows except the first n rows.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="then (arcticdb.QueryBuilder.then)" href="#arcticdb.QueryBuilder.then">then</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Applies processing specified in other after any processing already defined for this QueryBuilder.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>






  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.apply" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">apply</span>


<a href="#arcticdb.QueryBuilder.apply" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">apply</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">expr</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Apply enables new columns to be created using supported QueryBuilder numeric operations. See the documentation for the
QueryBuilder class for more information on supported expressions - any expression valid in a filter is valid when using
<code>apply</code>.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Name of the column to be created</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expr</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Expression</p>
              </div>
              <p>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;VWAP&quot;: np.arange(0, 10, dtype=np.float64),</span>
<span class="go">        &quot;ASK&quot;: np.arange(10, 20, dtype=np.uint16),</span>
<span class="go">        &quot;VOL_ACC&quot;: np.arange(20, 30, dtype=np.int32),</span>
<span class="go">    },</span>
<span class="go">    index=np.arange(10),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;expression&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="s2">&quot;ADJUSTED&quot;</span><span class="p">,</span> <span class="n">q</span><span class="p">[</span><span class="s2">&quot;ASK&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">q</span><span class="p">[</span><span class="s2">&quot;VOL_ACC&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;expression&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="go">VOL_ACC  ASK  VWAP  ADJUSTED</span>
<span class="go">0     20   10   0.0       207</span>
<span class="go">1     21   11   1.0       238</span>
<span class="go">2     22   12   2.0       271</span>
<span class="go">3     23   13   3.0       306</span>
<span class="go">4     24   14   4.0       343</span>
<span class="go">5     25   15   5.0       382</span>
<span class="go">6     26   16   6.0       423</span>
<span class="go">7     27   17   7.0       466</span>
<span class="go">8     28   18   8.0       511</span>
<span class="go">9     29   19   9.0       558</span>
</code></pre></div>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.concat" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">concat</span>


<a href="#arcticdb.QueryBuilder.concat" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">concat</span><span class="p">(</span><span class="n">join</span><span class="p">:</span> <span class="n"><span title="str">str</span></span> <span class="o">=</span> <span class="s1">&#39;outer&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Concatenate a list of symbols together. Should be the first clause in a QueryBuilder provided to either
NativeVersionStore.batch_read_and_join or Library.read_batch_and_join.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>join</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether the columns of the input symbols should be inner or outer joined. Supported inputs are "inner" and
"outer".
* inner - Only columns present in ALL the input symbols will be present in the returned DataFrame.
* outer - Columns present in ANY of the input symbols will be present in the returned DataFrame. Columns
  that are present in some input symbols but not in others will be backfilled according to their type using
  the same rules as with dynamic schema.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#34;outer&#34;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="arcticdb.exceptions.ArcticNativeException">ArcticNativeException</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>The join argument is not one of "inner" or "outer"</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Join 2 symbols together without any pre or post processing.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;col1&quot;: [0.5],</span>
<span class="go">        &quot;col2&quot;: [1],</span>
<span class="go">    },</span>
<span class="go">    index=[pd.Timestamp(&quot;2025-01-01&quot;)],</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;col3&quot;: [&quot;hello&quot;],</span>
<span class="go">        &quot;col2&quot;: [2],</span>
<span class="go">    },</span>
<span class="go">    index=[pd.Timestamp(&quot;2025-01-02&quot;)],</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="s2">&quot;outer&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol0&quot;</span><span class="p">,</span> <span class="n">df0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol1&quot;</span><span class="p">,</span> <span class="n">df1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">batch_read_and_join</span><span class="p">([</span><span class="s2">&quot;symbol0&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol1&quot;</span><span class="p">],</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>                       col1     col2     col3
2025-01-01 00:00:00     0.5        1     None
2025-01-02 00:00:00     NaN        2  "hello"
</code></pre>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">batch_read_and_join</span><span class="p">([</span><span class="s2">&quot;symbol0&quot;</span><span class="p">,</span> <span class="s2">&quot;symbol1&quot;</span><span class="p">],</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>                       col2
2025-01-01 00:00:00       1
2025-01-02 00:00:00       2
</code></pre>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.date_range" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">date_range</span>


<a href="#arcticdb.QueryBuilder.date_range" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">date_range</span><span class="p">(</span><span class="n">date_range</span><span class="p">:</span> <span class="n"><span title="arcticdb.supported_types.DateRangeInput">DateRangeInput</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>DateRange to read data for.  Applicable only for Pandas data with a DateTime index. Returns only the part
of the data that falls within the given range. If this is the only processing clause being applied, then the
returned data object will use less memory than passing date_range directly as an argument to the read method, at
 the cost of possibly being slightly slower.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>date_range</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A date range in the same format as accepted by the read method.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="arcticdb.supported_types.DateRangeInput">DateRangeInput</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">date_range</span><span class="p">((</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;2000-01-01&quot;</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;2001-01-01&quot;</span><span class="p">)))</span>
</code></pre></div>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.groupby" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">groupby</span>


<a href="#arcticdb.QueryBuilder.groupby" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">groupby</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n"><span title="str">str</span></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Group symbol by column name. GroupBy operations must be followed by an aggregation operator. Currently the following five aggregation
operators are supported:</p>
<ul>
<li>"mean" - compute the mean of the group</li>
<li>"sum" - compute the sum of the group</li>
<li>"min" - compute the min of the group</li>
<li>"max" - compute the max of the group</li>
<li>"count" - compute the count of group</li>
</ul>
<p>For usage examples, see below.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Name of the column to group on. Note that currently GroupBy only supports single-column groupings.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Average (mean) over two groups:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;grouping_column&quot;: [&quot;group_1&quot;, &quot;group_1&quot;, &quot;group_1&quot;, &quot;group_2&quot;, &quot;group_2&quot;],</span>
<span class="go">        &quot;to_mean&quot;: [1.1, 1.4, 2.5, np.nan, 2.2],</span>
<span class="go">    },</span>
<span class="go">    index=np.arange(5),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;grouping_column&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;to_mean&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>           to_mean
 group_1  1.666667
 group_2       2.2
</code></pre>
<p>Max over one group:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;grouping_column&quot;: [&quot;group_1&quot;, &quot;group_1&quot;, &quot;group_1&quot;],</span>
<span class="go">        &quot;to_max&quot;: [1, 5, 4],</span>
<span class="go">    },</span>
<span class="go">    index=np.arange(3),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;grouping_column&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;to_max&quot;</span><span class="p">:</span> <span class="s2">&quot;max&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>         to_max
group_1  5
</code></pre>
<p>Max and Mean:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;grouping_column&quot;: [&quot;group_1&quot;, &quot;group_1&quot;, &quot;group_1&quot;],</span>
<span class="go">        &quot;to_mean&quot;: [1.1, 1.4, 2.5],</span>
<span class="go">        &quot;to_max&quot;: [1.1, 1.4, 2.5]</span>
<span class="go">    },</span>
<span class="go">    index=np.arange(3),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;grouping_column&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;to_max&quot;</span><span class="p">:</span> <span class="s2">&quot;max&quot;</span><span class="p">,</span> <span class="s2">&quot;to_mean&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>         to_max   to_mean
group_1     2.5  1.666667
</code></pre>
<p>Min and max over one column, mean over another:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;grouping_column&quot;: [&quot;group_1&quot;, &quot;group_1&quot;, &quot;group_1&quot;, &quot;group_2&quot;, &quot;group_2&quot;],</span>
<span class="go">        &quot;agg_1&quot;: [1, 2, 3, 4, 5],</span>
<span class="go">        &quot;agg_2&quot;: [1.1, 1.4, 2.5, np.nan, 2.2],</span>
<span class="go">    },</span>
<span class="go">    index=np.arange(5),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;grouping_column&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;agg_1_min&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;agg_1&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">),</span> <span class="s2">&quot;agg_1_max&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;agg_1&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">),</span> <span class="s2">&quot;agg_2&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>         agg_1_min  agg_1_max     agg_2
group_1          1          3  1.666667
group_2          4          5       2.2
</code></pre>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.head" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">head</span>


<a href="#arcticdb.QueryBuilder.head" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">head</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Filter out all but the first n rows of data. If n is negative, return all rows except the last n rows.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>n</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Number of rows to select if non-negative, otherwise number of rows to exclude.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="int">int</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>5</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.optimise_for_memory" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">optimise_for_memory</span>


<a href="#arcticdb.QueryBuilder.optimise_for_memory" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">optimise_for_memory</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Reduce peak memory usage during the query, at the expense of some performance.</p>
<p>Optimisations applied:</p>
<ul>
<li>Memory used by strings that are present in segments read from storage, but are not required in the final dataframe that will be presented back to the user, is reclaimed earlier in the processing pipeline.</li>
</ul>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.optimise_for_speed" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">optimise_for_speed</span>


<a href="#arcticdb.QueryBuilder.optimise_for_speed" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">optimise_for_speed</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Process query as fast as possible (the default behaviour)</p>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.prepend" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">prepend</span>


<a href="#arcticdb.QueryBuilder.prepend" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">prepend</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Applies processing specified in other before any processing already defined for this QueryBuilder.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>other</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>QueryBuilder to apply before this one in the processing pipeline.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.resample" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">resample</span>


<a href="#arcticdb.QueryBuilder.resample" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">resample</span><span class="p">(</span>
    <span class="n">rule</span><span class="p">:</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="pandas.DateOffset">DateOffset</span></span><span class="p">],</span>
    <span class="n">closed</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">offset</span><span class="p">:</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="pandas.Timedelta">Timedelta</span></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">origin</span><span class="p">:</span> <span class="n"><span title="typing.Union">Union</span></span><span class="p">[</span><span class="n"><span title="str">str</span></span><span class="p">,</span> <span class="n"><span title="pandas.Timestamp">Timestamp</span></span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;epoch&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Resample a symbol on the index. The symbol must be datetime indexed. Resample operations must be followed by
an aggregation operator. Currently, the following 7 aggregation operators are supported:</p>
<ul>
<li>"mean" - compute the mean of the group</li>
<li>"sum" - compute the sum of the group</li>
<li>"min" - compute the min of the group</li>
<li>"max" - compute the max of the group</li>
<li>"count" - compute the count of group</li>
<li>"first" - compute the first value in the group</li>
<li>"last" - compute the last value in the group</li>
</ul>
<p>Note that not all aggregators are supported with all column types:</p>
<ul>
<li>Numeric columns - support all aggregators</li>
<li>Bool columns - support all aggregators</li>
<li>String columns - support count, first, and last aggregators</li>
<li>Datetime columns - support all aggregators EXCEPT sum</li>
</ul>
<p>Note that time-buckets which contain no index values in the symbol will NOT be included in the returned
DataFrame. This is not the same as Pandas default behaviour.
Resampling is currently not supported with:</p>
<ul>
<li>Dynamic schema where an aggregation column is missing from one or more of the row-slices.</li>
<li>Sparse data.</li>
</ul>
<p>The resample results match pandas resample with <code>origin="epoch"</code>. We plan to add an 'origin' argument in
a future release and will then change the default value to '"start_day"' to match the Pandas default. This
will change the results in cases where the rule is not a multiple of 24 hours.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>rule</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The frequency at which to resample the data. Supported rule strings are ns, us, ms, s, min, h, and D, and
multiples/combinations of these, such as 1h30min. pd.DataOffset objects representing frequencies from this
set are also accepted.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pandas.DateOffset">DateOffset</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>closed</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Which boundary of each time-bucket is closed. Must be one of 'left' or 'right'. If not provided, the default
is left for all currently supported frequencies.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>label</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Which boundary of each time-bucket is used as the index value in the returned DataFrame. Must be one of
'left' or 'right'. If not provided, the default is left for all currently supported frequencies.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>offset</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Offset the start of each bucket. Supported strings are the same as in <code>pd.Timedelta</code>. If offset is larger than
rule then <code>offset</code> modulo <code>rule</code> is used as an offset.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pandas.Timedelta">Timedelta</span>]]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>origin</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The timestamp on which to adjust the grouping. Supported string are:</p>
<ul>
<li>epoch: origin is 1970-01-01</li>
<li>start: origin is the first value of the timeseries</li>
<li>start_day: origin is the first day at midnight of the timeseries</li>
<li>end: origin is the last value of the timeseries</li>
<li>end_day: origin is the ceiling midnight of the last day</li>
</ul>
<p><code>start</code>, <code>start_day</code>, <code>end</code>, <code>end_day</code> origin values are not supported in conjunction with <code>date_range</code>.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pandas.Timestamp">Timestamp</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;epoch&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="arcticdb.exceptions.ArcticDbNotYetImplemented">ArcticDbNotYetImplemented</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>A frequency string or Pandas DateOffset object are provided to the rule argument outside the supported
frequencies listed above.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="arcticdb.exceptions.ArcticNativeException">ArcticNativeException</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>The closed or label arguments are not one of "left" or "right"</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="SchemaException">SchemaException</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>Raised on call to read if:</p>
<ul>
<li>If the aggregation specified is not compatible with the type of the column being aggregated as
  specified above.</li>
<li>The library has dynamic schema enabled, and at least one of the columns being aggregated is missing
  from at least one row-slice.</li>
<li>At least one of the columns being aggregated contains sparse data.</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="arcticdb.exceptions.UserInputException">UserInputException</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <ul>
<li><code>start</code>, <code>start_day</code>, <code>end</code>, <code>end_day</code> is used in conjunction with <code>date_range</code></li>
<li><code>origin</code> is not one of <code>start</code>, <code>start_day</code>, <code>end</code>, <code>end_day</code>, <code>epoch</code> or a <code>pd.Timestamp</code></li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Resample two hours worth of minutely data down to hourly data, summing the column 'to_sum':</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;to_sum&quot;: np.arange(120),</span>
<span class="go">    },</span>
<span class="go">    index=pd.date_range(&quot;2024-01-01&quot;, freq=&quot;min&quot;, periods=120),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;to_sum&quot;</span><span class="p">:</span> <span class="s2">&quot;sum&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>                     to_sum
2024-01-01 00:00:00    1770
2024-01-01 01:00:00    5370
</code></pre>
<p>As above, but specifying that the closed boundary of each time-bucket is the right hand side, and also to label
the output by the right boundary:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;to_sum&quot;</span><span class="p">:</span> <span class="s2">&quot;sum&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>                     to_sum
2024-01-01 00:00:00       0
2024-01-01 01:00:00    1830
2024-01-01 02:00:00    5310
</code></pre>
<p>Nones, NaNs, and NaTs are omitted from aggregations:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;to_mean&quot;: [1.0, np.nan, 2.0],</span>
<span class="go">    },</span>
<span class="go">    index=pd.date_range(&quot;2024-01-01&quot;, freq=&quot;min&quot;, periods=3),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;to_mean&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>                     to_mean
2024-01-01 00:00:00      1.5
</code></pre>
<p>Output column names can be controlled through the format of the dict passed to agg:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="go">    {</span>
<span class="go">        &quot;agg_1&quot;: [1, 2, 3, 4, 5],</span>
<span class="go">        &quot;agg_2&quot;: [1.0, 2.0, 3.0, np.nan, 5.0],</span>
<span class="go">    },</span>
<span class="go">    index=pd.date_range(&quot;2024-01-01&quot;, freq=&quot;min&quot;, periods=5),</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">adb</span><span class="o">.</span><span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s2">&quot;agg_1_min&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;agg_1&quot;</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">),</span> <span class="s2">&quot;agg_1_max&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;agg_1&quot;</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">),</span> <span class="s2">&quot;agg_2&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;symbol&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</code></pre></div>
    <pre><code>                     agg_1_min  agg_1_max     agg_2
2024-01-01 00:00:00          1          5      2.75
</code></pre>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.row_range" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">row_range</span>


<a href="#arcticdb.QueryBuilder.row_range" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">row_range</span><span class="p">(</span><span class="n">row_range</span><span class="p">:</span> <span class="n"><span title="typing.Tuple">Tuple</span></span><span class="p">[</span><span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">],</span> <span class="n"><span title="typing.Optional">Optional</span></span><span class="p">[</span><span class="n"><span title="int">int</span></span><span class="p">]])</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Row range to read data for. Inclusive of the lower bound, exclusive of the upper bound.
Should behave the same as df.iloc[start:end], including in the handling of negative start/end values.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>row_range</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Row range to read data for. Inclusive of the lower bound, exclusive of the upper bound.
Leaving either element as None leaves that side of the range open-ended. For example (5, None) would
include everything from the 5th row onwards.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Tuple">Tuple</span>[<span title="typing.Optional">Optional</span>[<span title="int">int</span>], <span title="typing.Optional">Optional</span>[<span title="int">int</span>]]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.tail" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">tail</span>


<a href="#arcticdb.QueryBuilder.tail" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">tail</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n"><span title="int">int</span></span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Filter out all but the last n rows of data. If n is negative, return all rows except the first n rows.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>n</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Number of rows to select if non-negative, otherwise number of rows to exclude.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="int">int</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>5</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="arcticdb.QueryBuilder.then" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">then</span>


<a href="#arcticdb.QueryBuilder.then" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">then</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Applies processing specified in other after any processing already defined for this QueryBuilder.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>other</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>QueryBuilder to apply after this one in the processing pipeline.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="arcticdb.QueryBuilder (arcticdb.version_store.processing.QueryBuilder)" href="#arcticdb.QueryBuilder">QueryBuilder</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Modified QueryBuilder object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="arcticdb.where" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">arcticdb.where</span>


<a href="#arcticdb.where" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">where</span><span class="p">(</span>
    <span class="n">condition</span><span class="p">:</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">,</span> <span class="n">left</span><span class="p">:</span> <span class="n"><span title="typing.Any">Any</span></span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="n"><span title="typing.Any">Any</span></span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="arcticdb.version_store.processing.ExpressionNode">ExpressionNode</span></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Ternary operator choosing from the left expression where condition is true, and from the right expression where
it is false. Similar to numpy.where, or the Python statement <code>left if condition else right</code>.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>condition</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The condition on which to choose from left or right. e.g. a boolean column, or a filtering statement such as
df["col"] == 0.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Any">Any</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>left</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The expression to select where condition is true. If the return value of the where function is being used as a
filter, then this must be another filtering statement. If the return value is being used as a projection to
create a new column, then this must be either an expression producing a column, or a value. See examples below
for both use cases.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Any">Any</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>right</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The expression to select where condition is false.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Any">Any</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="arcticdb.version_store.processing.ExpressionNode">ExpressionNode</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>An opaque object representing a node in the Abstract Syntax Tree of the expression being computed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;col1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;col2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="s2">&quot;col3&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="p">}</span>
<span class="go">&gt;&gt;&gt;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;sym&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
</code></pre></div>
    <p>Produce a new column by selecting from functions of two other columns</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="s2">&quot;new_col&quot;</span><span class="p">,</span> <span class="n">where</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">q</span><span class="p">[</span><span class="s2">&quot;col2&quot;</span><span class="p">],</span> <span class="n">q</span><span class="p">[</span><span class="s2">&quot;col3&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;sym&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="go">        col1   col2   col3   new_col</span>
<span class="go">    0      0      0      5         0</span>
<span class="go">    1      0      1      6         2</span>
<span class="go">    2      1      2      7         7</span>
<span class="go">    3      0      3      8         6</span>
<span class="go">    4      1      4      9         9</span>
</code></pre></div>
    <p>Produce a new column by selecting from one column and one fixed value</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="s2">&quot;new_col&quot;</span><span class="p">,</span> <span class="n">where</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">),</span> <span class="n">q</span><span class="p">[</span><span class="s2">&quot;col2&quot;</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;sym&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="go">        col1   col2   col3   new_col</span>
<span class="go">    0      0      0      5         0</span>
<span class="go">    1      0      1      6         1</span>
<span class="go">    2      1      2      7        10</span>
<span class="go">    3      0      3      8         3</span>
<span class="go">    4      1      4      9        10</span>
</code></pre></div>
    <p>Filter based on different criteria depending on the first condition</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">QueryBuilder</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="p">[</span><span class="n">where</span><span class="p">(</span><span class="n">q</span><span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">q</span><span class="p">[</span><span class="s2">&quot;col2&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">q</span><span class="p">[</span><span class="s2">&quot;col3&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">9</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lib</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;sym&quot;</span><span class="p">,</span> <span class="n">query_builder</span><span class="o">=</span><span class="n">q</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
<span class="go">        col1   col2   col3</span>
<span class="go">    0      0      0      5</span>
<span class="go">    1      1      4      9</span>
</code></pre></div>


    </div>

</div>












                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "content.code.copy", "toc.integrate"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>